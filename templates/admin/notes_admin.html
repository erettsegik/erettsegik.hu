{% extends 'admin/index.html' %}

{% block content %}
<h1>Jegyzetek szerkesztése</h1>

{% if action == 'add' %}

    {% if status == 'form' %}

    <form action='notes_admin.php?action=add' method='post'>
    <input type='text' name='title' placeholder='Cím' class='shorter'>
    <br>
    <select name='subjectid'>
        {% for subject in subjectlist %}
        <option value='{{ subject.id }}'>{{ subject.name }}</option>
        {% endfor %}
    </select>
    <br>
    <select name='category'>
        {% for category in categories %}
          <option value='{{ category.id }}'>{{ category.name }}</option>
        {% endfor %}
    </select>
    <br>
    <button type='button' class='edit-button' onclick='emphasis();'>kiemelés</button>
    <button type='button' class='edit-button' onclick='header();'>alcím</button>
    <button type='button' class='edit-button' onclick='image();'>kép</button>
    <button type='button' class='edit-button' onclick='list("ordered");'>számozott lista</button>
    <button type='button' class='edit-button' onclick='list("unordered");'>felsorolás</button>
    <button type='button' class='edit-button' onclick='' id='notes-help'>Segítség</button>
    <br style='clear: both;'>
    <textarea name='text' placeholder='Szöveg' rows='50' cols='150' id='note-txt'></textarea>
    <br>
    <input type='checkbox' name='live' style='width: auto;'> élő
    <br>
    <input type='submit' name='submit' class='submit'>
    </form>

    <script type='text/JavaScript' src='/js/editor.js'></script>

    {% else %}

        <p>Sikeres mentés!</p>

    {% endif %}

{% endif %}

{% if action == 'edit' %}

    {% if status == 'form' %}

    <form action='notes_admin.php?action=edit&amp;id={{ notedata.id }}' method='post'>
    <input type='text' name='title' placeholder='cím' value='{{ notedata.title | raw }}' class='shorter'>
    <br>
    <select name='subjectid'>
        {% for subject in subjectlist %}
        {% if subject.id == notedata.subjectid %}
            <option value='{{ subject.id }}' selected>{{ subject.name }}</option>
        {% else %}
            <option value='{{ subject.id }}'>{{ subject.name }}</option>
        {% endif %}
        {% endfor %}
    </select>
    <br>
    <select name='category'>
        {% for category in categories %}
          <option value='{{ category.id }}' {% if notedata.category == category.id %} selected {% endif %}>
            {{ category.name }}
          </option>
        {% endfor %}
    </select>
    <br>
    <button type='button' class='edit-button' onclick='emphasis();'>kiemelés</button>
    <button type='button' class='edit-button' onclick='header();'>alcím</button>
    <button type='button' class='edit-button' onclick='image();'>kép</button>
    <button type='button' class='edit-button' onclick='list("ordered");'>számozott lista</button>
    <button type='button' class='edit-button' onclick='list("unordered");'>felsorolás</button>
    <button type='button' class='edit-button' onclick='' id='notes-help'>Segítség</button>
    <br style='clear: both;'>
    <textarea name='text' placeholder='Szöveg' rows='40' cols='150' id='note-txt'>{{ notedata.text | raw }}</textarea>
    <br>
    <input type='checkbox' style='width: auto;' name='live' {% if notedata.live %} checked {% endif %}> élő
    <span class='delete-box'><input type='checkbox' style='width: auto;' name='delete'> TÖRLÉS</span>
    <br style='clear: both;'>
    <input type='submit' name='submit' class='submit'>
    </form>

    <script type='text/JavaScript' src='/js/editor.js'></script>

    {% else %}

        <p>Sikeres mentés!</p>

    {% endif %}

{% endif %}

{% if status == 'list' %}

<a href='notes_admin.php?action=add'>új hozzáadása</a>

{% for subject in subjects %}
    <h2>{{ subject.name }}</h2>
    <ul>
    {% for note in subject.data %}
    <li><a href='notes_admin.php?action=edit&amp;id={{ note.id }}'>{{ note.title | raw }}</a></li>
    {% endfor %}
    </ul>
{% endfor %}

{% endif %}

{% endblock %}
