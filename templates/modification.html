{% extends 'index.html' %}

{% block content %}
{% if action == 'add' %}

    <h1>Új javaslat hozzáadása a következő jegyzethez: {{ note.title }}</h1>

    {% if status == 'form' %}

        <form action='?p=modification&amp;action=add&amp;noteid={{ note.id }}' method='post'>
        Javaslat címe: <input type='text' name='title' required><br>
        <div class='modification'>Eredeti szöveg:<br>
        <textarea name='original_text' readonly>{{ note.text }}</textarea></div>
        <div class='modification'>Új szöveg:<br>
        <textarea name='new_text' required>{{ note.text }}</textarea></div><br>
        Megjegyzés (opcionális): <input type='text' name='comment'><br>
        <input type='submit' name='submit' class='submit' value='Elküldés'>
        </form>

    {% else %}

    Siker!

    {% endif %}

{% else %}

    <h1 id='modification-title'>{{ modification.title }}</h1>

    {% if modification.status == 0 %}
    <img src='/img/pending.png' alt='pending' id='modification-status'>
    {% endif %}

    {% if modification.status == 1 %}
    <img src='/img/merged.png' alt='merged' id='modification-status'>
    {% endif %}

    {% if modification.status == 2 %}
    <img src='/img/rejected.png' alt='rejected' id='modification-status'>
    {% endif %}

    <br>

    <span class='article-meta'>
        Tétel címe: {{ note.title | raw }}
        {% if modification.comment != '' %}
        <br>beküldő megjegyzése: {{ modification.comment }}
        {% endif %}
        <br>
        beküldve: {{ modification.date }}
    </span>
    <br>

    <div class='modification-container'><p>{{ modification.start_text }}<span class='difference-original'>{{ modification.old_text }}</span>{{ modification.end_text }}</p></div>

    <div class='modification-container'><p>{{ modification.start_text }}<span class='difference-modified'>{{ modification.new_text }}</span>{{ modification.end_text }}</p></div>

    <br style='clear: both;'>

    <h2>Megjegyzések</h2>
      <div id='disqus_thread'></div>
      <script type='text/javascript'>
        var disqus_shortname = 'erettsegikhu';
        (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
    <noscript>Engedélyezned kell a JavaScriptet a <a href='http://disqus.com/?ref_noscript'>Disqus kommentek</a> megjelenítéséhez.</noscript>

{% endif %}

{% endblock %}
